<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/flickity@2/dist/flickity.min.css"
    />
  </head>
  <style>
    body {
      height: 1000px;
    }
    .slideshow {
      margin-top: calc(50vh - 25vh);
      padding-bottom: 4vw;
    }

    .slide {
      width: 200px;
      max-resolution: 4vw;
      margin-right: 4vw;
      text-align: center;
      height: 200px;
      background-color: red;
      border-radius: 6px;
      color: #fff;
      font-family: "Helvetica Neue", helvetica, arial;
      font-size: 24px;
      line-height: 50vh;
    }
    img {
      width: 100%;
      height: 100%;
    }
  </style>
  <body>
    <div class="slideshow js-slideshow">
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
      <div class="slide">
        <img
          src="./img/influencer/content-creator-platform-argentina.jpeg"
          alt=""
        />
      </div>
    </div>
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

    <script>
      //
      //   Variables
      //
      //////////////////////////////////////////////////////////////////////

      // Play with this value to change the speed
      let tickerSpeed = 2;

      let flickity = null;
      let isPaused = false;
      const slideshowEl = document.querySelector(".js-slideshow");

      //
      //   Functions
      //
      //////////////////////////////////////////////////////////////////////

      const update = () => {
        if (isPaused) return;
        if (flickity.slides) {
          flickity.x = (flickity.x - tickerSpeed) % flickity.slideableWidth;
          flickity.selectedIndex = flickity.dragEndRestingSelect();
          flickity.updateSelectedSlide();
          flickity.settle(flickity.x);
        }
        window.requestAnimationFrame(update);
      };

      const pause = () => {
        isPaused = true;
      };

      const play = () => {
        if (isPaused) {
          isPaused = false;
          window.requestAnimationFrame(update);
        }
      };

      //
      //   Create Flickity
      //
      //////////////////////////////////////////////////////////////////////

      flickity = new Flickity(slideshowEl, {
        autoPlay: false,
        prevNextButtons: true,
        pageDots: false,
        draggable: true,
        wrapAround: true,
        selectedAttraction: 0.015,
        friction: 0.25,
      });
      flickity.x = 0;

      //
      //   Add Event Listeners
      //
      //////////////////////////////////////////////////////////////////////

      slideshowEl.addEventListener("mouseenter", pause, false);
      slideshowEl.addEventListener("focusin", pause, false);
      slideshowEl.addEventListener("mouseleave", play, false);
      slideshowEl.addEventListener("focusout", play, false);

      flickity.on("dragStart", () => {
        isPaused = true;
      });

      //
      //   Start Ticker
      //
      //////////////////////////////////////////////////////////////////////

      update();
    </script>
  </body>
</html>
